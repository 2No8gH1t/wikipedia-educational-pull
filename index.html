<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Educational Wikipedia</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Times New Roman", Times, serif;
            background: #c0c0c0;
            background-image: 
                repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0,0,0,.05) 10px, rgba(0,0,0,.05) 20px);
            min-height: 100vh;
            padding: 20px;
            color: #000000;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: #000080;
            margin-bottom: 20px;
            padding: 15px;
            background: #d4d0c8;
            border: 2px outset #d4d0c8;
        }

        header h1 {
            font-size: 24pt;
            margin-bottom: 8px;
            font-weight: bold;
            color: #000080;
        }

        .subtitle {
            font-size: 12pt;
            color: #000000;
        }

        main {
            background: #ffffff;
            border: 3px inset #808080;
            padding: 20px;
            background-color: #c0c0c0;
        }

        .fetch-button {
            width: 100%;
            padding: 8px 15px;
            font-size: 11pt;
            font-weight: normal;
            color: #000000;
            background: #d4d0c8;
            border: 2px outset #d4d0c8;
            border-top-color: #ffffff;
            border-left-color: #ffffff;
            border-right-color: #808080;
            border-bottom-color: #808080;
            cursor: pointer;
            font-family: "MS Sans Serif", Arial, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .fetch-button:hover:not(:disabled) {
            border: 2px inset #d4d0c8;
            border-top-color: #808080;
            border-left-color: #808080;
            border-right-color: #ffffff;
            border-bottom-color: #ffffff;
        }

        .fetch-button:active:not(:disabled) {
            border: 2px inset #d4d0c8;
            border-top-color: #808080;
            border-left-color: #808080;
            border-right-color: #ffffff;
            border-bottom-color: #ffffff;
        }

        .fetch-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loader {
            width: 16px;
            height: 16px;
            border: 2px solid #808080;
            border-top-color: #000000;
            border-right-color: #000000;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hidden {
            display: none !important;
        }

        .article-container {
            background: #ffffff;
            border: 2px inset #808080;
            padding: 15px;
            margin-top: 15px;
            background-color: #ffffff;
        }

        .article-header {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #000000;
        }

        .article-header h2 {
            font-size: 16pt;
            color: #000000;
            margin-bottom: 8px;
            line-height: 1.3;
            font-weight: bold;
            font-family: Arial, sans-serif;
        }

        .wiki-link {
            color: #0000ff;
            text-decoration: underline;
            font-weight: normal;
            display: inline-block;
            font-size: 10pt;
        }

        .wiki-link:hover {
            color: #800080;
        }

        .wiki-link:visited {
            color: #800080;
        }

        .article-content {
            margin-bottom: 15px;
            overflow: hidden;
        }

        .article-image {
            max-width: 300px;
            width: 100%;
            height: auto;
            border: 2px inset #808080;
            float: right;
            margin: 0 0 15px 15px;
            object-fit: cover;
            background: #ffffff;
            padding: 2px;
        }

        .summary {
            font-size: 11pt;
            line-height: 1.5;
            color: #000000;
            text-align: left;
            font-family: "Times New Roman", Times, serif;
        }

        .summary p {
            margin-bottom: 12px;
            text-indent: 0;
        }

        .summary p:last-child {
            margin-bottom: 0;
        }

        .summary p:first-child {
            font-size: 12pt;
            font-weight: bold;
            color: #000000;
            line-height: 1.5;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #808080;
        }

        .summary-section {
            margin-bottom: 15px;
        }

        .summary-section h3 {
            font-size: 13pt;
            font-weight: bold;
            color: #000000;
            margin-bottom: 8px;
            margin-top: 15px;
            padding-bottom: 5px;
            border-bottom: 2px solid #000000;
            font-family: Arial, sans-serif;
        }

        .summary-section:first-child h3 {
            margin-top: 0;
        }

        .summary-section p {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .summary-section ul {
            margin: 10px 0;
            padding-left: 30px;
        }

        .summary-section li {
            margin-bottom: 5px;
            line-height: 1.5;
        }

        .summary-highlight {
            background: #d4d0c8;
            padding: 10px;
            border: 2px inset #808080;
            margin: 15px 0;
        }

        .summary-highlight p {
            margin-bottom: 5px;
            font-weight: bold;
            color: #000000;
        }

        .summary-highlight p:last-child {
            margin-bottom: 0;
        }

        .article-meta {
            display: flex;
            gap: 20px;
            padding-top: 10px;
            border-top: 1px solid #808080;
            font-size: 9pt;
            color: #000000;
            flex-wrap: wrap;
            font-family: "MS Sans Serif", Arial, sans-serif;
        }

        .meta-item {
            display: flex;
            gap: 5px;
        }

        .error-message {
            background: #ffffff;
            color: #ff0000;
            padding: 10px;
            border: 2px inset #808080;
            margin-top: 15px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 18pt;
            }
            
            main {
                padding: 15px;
            }
            
            .article-header h2 {
                font-size: 14pt;
            }
            
            .article-image {
                float: none;
                margin: 0 0 15px 0;
                width: 100%;
                max-width: 100%;
            }
            
            .summary {
                font-size: 10pt;
                line-height: 1.4;
            }
            
            .article-meta {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Random Educational Wikipedia</h1>
            <p class="subtitle">Discover something new every time</p>
        </header>
        
        <main>
            <button id="fetchBtn" class="fetch-button">
                <span id="btnText">Get Random Article</span>
                <span id="btnLoader" class="loader hidden"></span>
            </button>
            
            <div id="articleContainer" class="article-container hidden">
                <div class="article-header">
                    <h2 id="articleTitle"></h2>
                    <a id="articleLink" href="#" target="_blank" class="wiki-link">
                        Read full article on Wikipedia â†’
                    </a>
                </div>
                
                <div class="article-content">
                    <img id="articleImage" src="" alt="" class="article-image hidden">
                    <div id="articleSummary" class="summary"></div>
                </div>
                
                <div class="article-meta">
                    <div class="meta-item">
                        <strong>Page ID:</strong> <span id="pageId"></span>
                    </div>
                    <div class="meta-item">
                        <strong>Last Modified:</strong> <span id="lastModified"></span>
                    </div>
                </div>
            </div>
            
            <div id="errorMessage" class="error-message hidden"></div>
        </main>
    </div>
    
    <script>
        const fetchBtn = document.getElementById('fetchBtn');
        const btnText = document.getElementById('btnText');
        const btnLoader = document.getElementById('btnLoader');
        const articleContainer = document.getElementById('articleContainer');
        const articleTitle = document.getElementById('articleTitle');
        const articleLink = document.getElementById('articleLink');
        const articleImage = document.getElementById('articleImage');
        const articleSummary = document.getElementById('articleSummary');
        const pageId = document.getElementById('pageId');
        const lastModified = document.getElementById('lastModified');
        const errorMessage = document.getElementById('errorMessage');

        // List of educational categories to filter random articles
        const educationalCategories = [
            'Education',
            'Science',
            'History',
            'Mathematics',
            'Physics',
            'Chemistry',
            'Biology',
            'Geography',
            'Literature',
            'Philosophy',
            'Technology',
            'Medicine',
            'Engineering',
            'Art',
            'Music',
            'Architecture'
        ];

        let attemptCount = 0;
        const maxAttempts = 10;

        async function fetchRandomArticle() {
            // Show loading state
            fetchBtn.disabled = true;
            btnText.textContent = 'Loading...';
            btnLoader.classList.remove('hidden');
            articleContainer.classList.add('hidden');
            errorMessage.classList.add('hidden');
            
            try {
                // Use Wikipedia's REST API to get a random article
                // The /page/random/summary endpoint returns a random article with summary
                const response = await fetch('https://en.wikipedia.org/api/rest_v1/page/random/summary');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                // Check if the article seems educational (simple heuristic)
                // You can enhance this with actual category checking if needed
                const isLikelyEducational = checkIfEducational(data);
                
                if (!isLikelyEducational && attemptCount < maxAttempts) {
                    attemptCount++;
                    // Retry if not educational
                    return fetchRandomArticle();
                }
                
                attemptCount = 0;
                
                // Display the article
                displayArticle(data);
                
            } catch (error) {
                console.error('Error fetching article:', error);
                errorMessage.textContent = `Error loading article: ${error.message}. Please try again.`;
                errorMessage.classList.remove('hidden');
            } finally {
                // Reset button state
                fetchBtn.disabled = false;
                btnText.textContent = 'Get Random Article';
                btnLoader.classList.add('hidden');
            }
        }

        function checkIfEducational(data) {
            // Simple heuristic: check if the title or extract contains educational keywords
            const text = (data.title + ' ' + (data.extract || '')).toLowerCase();
            const educationalKeywords = [
                'education', 'learn', 'study', 'science', 'history', 'mathematics',
                'physics', 'chemistry', 'biology', 'geography', 'literature',
                'philosophy', 'technology', 'medicine', 'engineering', 'art',
                'music', 'theory', 'concept', 'principle', 'method', 'system'
            ];
            
            // Check if at least one keyword is present
            return educationalKeywords.some(keyword => text.includes(keyword));
        }

        function formatSummaryAsResearchArticle(paragraphs, container) {
            if (paragraphs.length === 0) return;
            
            // First paragraph is the introduction/overview - format as highlighted intro
            const introDiv = document.createElement('div');
            introDiv.className = 'summary-highlight';
            const introP = document.createElement('p');
            introP.textContent = paragraphs[0].trim();
            introDiv.appendChild(introP);
            container.appendChild(introDiv);
            
            // If there's only one paragraph, we're done
            if (paragraphs.length === 1) return;
            
            // Remaining paragraphs organized into sections
            let remainingParagraphs = paragraphs.slice(1);
            
            // Determine content structure based on paragraph count and content
            if (remainingParagraphs.length >= 3) {
                // Three or more paragraphs: create structured sections
                
                // Overview/Background section (middle paragraphs)
                const midPoint = Math.floor(remainingParagraphs.length / 2);
                const overviewParagraphs = remainingParagraphs.slice(0, midPoint);
                
                if (overviewParagraphs.length > 0) {
                    const overviewSection = document.createElement('div');
                    overviewSection.className = 'summary-section';
                    const overviewH3 = document.createElement('h3');
                    overviewH3.textContent = 'Overview and Key Concepts';
                    overviewSection.appendChild(overviewH3);
                    
                    overviewParagraphs.forEach(para => {
                        const p = document.createElement('p');
                        p.textContent = para.trim();
                        overviewSection.appendChild(p);
                    });
                    
                    container.appendChild(overviewSection);
                }
                
                // Significance/Findings section (remaining paragraphs)
                const findingsParagraphs = remainingParagraphs.slice(midPoint);
                
                if (findingsParagraphs.length > 0) {
                    const findingsSection = document.createElement('div');
                    findingsSection.className = 'summary-section';
                    const findingsH3 = document.createElement('h3');
                    findingsH3.textContent = 'Significance and Implications';
                    findingsSection.appendChild(findingsH3);
                    
                    findingsParagraphs.forEach(para => {
                        const p = document.createElement('p');
                        p.textContent = para.trim();
                        findingsSection.appendChild(p);
                    });
                    
                    container.appendChild(findingsSection);
                }
            } else {
                // Fewer paragraphs: format as simple paragraphs with a "Details" section
                const detailsSection = document.createElement('div');
                detailsSection.className = 'summary-section';
                const detailsH3 = document.createElement('h3');
                detailsH3.textContent = 'Key Information';
                detailsSection.appendChild(detailsH3);
                
                remainingParagraphs.forEach(para => {
                    const p = document.createElement('p');
                    p.textContent = para.trim();
                    detailsSection.appendChild(p);
                });
                
                container.appendChild(detailsSection);
            }
        }

        function displayArticle(data) {
            // Set title
            articleTitle.textContent = data.title;
            
            // Set Wikipedia link
            if (data.content_urls && data.content_urls.desktop) {
                articleLink.href = data.content_urls.desktop.page;
            } else {
                articleLink.href = `https://en.wikipedia.org/wiki/${encodeURIComponent(data.title)}`;
            }
            
            // Set image if available
            if (data.thumbnail && data.thumbnail.source) {
                articleImage.src = data.thumbnail.source;
                articleImage.alt = data.title;
                articleImage.classList.remove('hidden');
            } else {
                articleImage.classList.add('hidden');
            }
            
            // Set summary with proper research article format
            if (data.extract) {
                // Split by double newlines to preserve paragraphs
                const paragraphs = data.extract.split('\n\n').filter(p => p.trim().length > 0);
                
                // Clear previous content
                articleSummary.innerHTML = '';
                
                // Format the summary following research article structure
                formatSummaryAsResearchArticle(paragraphs, articleSummary);
            } else {
                articleSummary.innerHTML = '<p>No summary available for this article.</p>';
            }
            
            // Set metadata
            if (data.pageid) {
                pageId.textContent = data.pageid;
            }
            
            if (data.timestamp) {
                const date = new Date(data.timestamp);
                lastModified.textContent = date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            }
            
            // Show article container
            articleContainer.classList.remove('hidden');
            
            // Scroll to article
            articleContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Event listener
        fetchBtn.addEventListener('click', fetchRandomArticle);

        // Fetch an article on page load
        window.addEventListener('load', () => {
            fetchRandomArticle();
        });
    </script>
</body>
</html>

