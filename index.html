<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Educational Wikipedia</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Text', 'Times New Roman', serif;
            background: #2c1810 url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="100" fill="%232c1810"/><path d="M0 0L100 100M100 0L0 100" stroke="%233d2417" stroke-width="0.5" opacity="0.3"/></svg>');
            background-size: 50px 50px;
            min-height: 100vh;
            padding: 20px;
            color: #3d2417;
            line-height: 1.7;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 35px 25px;
            background: linear-gradient(to bottom, #f4e4bc 0%, #e8d5a3 100%);
            border: 4px double #8b4513;
            border-radius: 8px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
            position: relative;
        }

        header::before {
            content: 'âš”';
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            opacity: 0.6;
        }

        header::after {
            content: 'âš”';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            opacity: 0.6;
        }

        header h1 {
            font-family: 'Cinzel', serif;
            font-size: 36px;
            margin-bottom: 10px;
            font-weight: 700;
            color: #5c2e0a;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 18px;
            color: #6b4423;
            font-weight: 400;
            font-style: italic;
        }

        main {
            background: linear-gradient(to bottom, #f9f1e0 0%, #f4e4bc 100%);
            border: 3px solid #8b4513;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
            position: relative;
        }

        main::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(139, 69, 19, 0.03) 2px, rgba(139, 69, 19, 0.03) 4px);
            pointer-events: none;
            border-radius: 5px;
        }

        .fetch-button {
            width: 100%;
            padding: 16px 24px;
            font-size: 18px;
            font-weight: 600;
            font-family: 'Cinzel', serif;
            color: #f4e4bc;
            background: linear-gradient(to bottom, #5c2e0a 0%, #3d2417 100%);
            border: 3px solid #8b4513;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
        }

        .fetch-button::before {
            content: 'ðŸŽ²';
            font-size: 20px;
        }

        .fetch-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.15);
            background: linear-gradient(to bottom, #6b4423 0%, #5c2e0a 100%);
        }

        .fetch-button:active:not(:disabled) {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4), inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .fetch-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loader {
            width: 18px;
            height: 18px;
            border: 3px solid rgba(244, 228, 188, 0.3);
            border-top-color: #f4e4bc;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hidden {
            display: none !important;
        }

        .article-container {
            background: linear-gradient(to bottom, #faf5eb 0%, #f4e4bc 100%);
            border: 3px solid #8b4513;
            border-radius: 8px;
            padding: 30px;
            margin-top: 25px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
            position: relative;
        }

        .article-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(139, 69, 19, 0.02) 2px, rgba(139, 69, 19, 0.02) 4px);
            pointer-events: none;
            border-radius: 5px;
        }

        .article-header {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 3px double #8b4513;
            position: relative;
        }

        .article-header h2 {
            font-family: 'Cinzel', serif;
            font-size: 32px;
            color: #5c2e0a;
            margin-bottom: 15px;
            line-height: 1.3;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .wiki-link {
            color: #6b4423;
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            font-size: 15px;
            transition: all 0.2s ease;
            border-bottom: 1px dotted #8b4513;
        }

        .wiki-link:hover {
            color: #8b4513;
            text-decoration: none;
            border-bottom: 1px solid #8b4513;
        }

        .wiki-link:visited {
            color: #6b4423;
        }

        .article-content {
            margin-bottom: 25px;
            overflow: hidden;
            position: relative;
        }

        .article-image {
            max-width: 300px;
            width: 100%;
            height: auto;
            border: 3px solid #8b4513;
            border-radius: 4px;
            float: right;
            margin: 0 0 20px 20px;
            object-fit: cover;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 10;
            background: #faf5eb;
        }

        .summary {
            font-size: 17px;
            line-height: 1.8;
            color: #3d2417;
            text-align: left;
        }

        .summary p {
            margin-bottom: 18px;
        }

        .summary p:last-child {
            margin-bottom: 0;
        }

        .summary-section {
            margin-bottom: 30px;
            position: relative;
        }

        .summary-section h3 {
            font-family: 'Cinzel', serif;
            font-size: 24px;
            font-weight: 700;
            color: #5c2e0a;
            margin-bottom: 15px;
            margin-top: 30px;
            padding-bottom: 10px;
            border-bottom: 3px double #8b4513;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1;
        }

        .summary-section:first-child h3 {
            margin-top: 0;
        }

        .summary-section p {
            margin-bottom: 16px;
            line-height: 1.8;
            color: #3d2417;
        }

        .summary-section ul {
            margin: 16px 0;
            padding-left: 35px;
        }

        .summary-section li {
            margin-bottom: 10px;
            line-height: 1.8;
            color: #3d2417;
        }

        .summary-highlight {
            background: linear-gradient(to bottom, #e8d5a3 0%, #d4c19a 100%);
            padding: 25px;
            border: 2px solid #8b4513;
            border-radius: 6px;
            margin: 25px 0;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .summary-highlight p {
            margin-bottom: 10px;
            font-weight: 600;
            color: #5c2e0a;
        }

        .summary-highlight p:last-child {
            margin-bottom: 0;
        }

        .article-meta {
            display: flex;
            gap: 30px;
            padding-top: 25px;
            border-top: 2px double #8b4513;
            font-size: 14px;
            color: #6b4423;
            flex-wrap: wrap;
            position: relative;
        }

        .meta-item {
            display: flex;
            gap: 8px;
        }

        .meta-item strong {
            color: #5c2e0a;
            font-weight: 700;
        }

        .error-message {
            background: #f4e4bc;
            color: #8b0000;
            padding: 18px;
            border: 3px solid #8b0000;
            border-radius: 6px;
            margin-top: 25px;
            font-weight: 600;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            header {
                padding: 25px 15px;
                margin-bottom: 20px;
            }

            header::before,
            header::after {
                display: none;
            }

            header h1 {
                font-size: 28px;
            }
            
            main {
                padding: 20px;
            }
            
            .article-header h2 {
                font-size: 24px;
            }
            
            .article-image {
                float: none;
                margin: 0 0 20px 0;
                width: 100%;
                max-width: 100%;
            }
            
            .summary {
                font-size: 16px;
            }

            .summary-section h3 {
                font-size: 20px;
            }
            
            .article-meta {
                flex-direction: column;
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Random Educational Wikipedia</h1>
            <p class="subtitle">Discover something new every time</p>
        </header>
        
        <main>
            <button id="fetchBtn" class="fetch-button">
                <span id="btnText">Get Random Article</span>
                <span id="btnLoader" class="loader hidden"></span>
            </button>
            
            <div id="articleContainer" class="article-container hidden">
                <div class="article-header">
                    <h2 id="articleTitle"></h2>
                    <a id="articleLink" href="#" target="_blank" class="wiki-link">
                        Read full article on Wikipedia â†’
                    </a>
                </div>
                
                <div class="article-content">
                    <img id="articleImage" src="" alt="" class="article-image hidden">
                    <div id="articleSummary" class="summary"></div>
                </div>
                
                <div class="article-meta">
                    <div class="meta-item">
                        <strong>Page ID:</strong> <span id="pageId"></span>
                    </div>
                    <div class="meta-item">
                        <strong>Last Modified:</strong> <span id="lastModified"></span>
                    </div>
                </div>
            </div>
            
            <div id="errorMessage" class="error-message hidden"></div>
        </main>
    </div>
    
    <script>
        const fetchBtn = document.getElementById('fetchBtn');
        const btnText = document.getElementById('btnText');
        const btnLoader = document.getElementById('btnLoader');
        const articleContainer = document.getElementById('articleContainer');
        const articleTitle = document.getElementById('articleTitle');
        const articleLink = document.getElementById('articleLink');
        const articleImage = document.getElementById('articleImage');
        const articleSummary = document.getElementById('articleSummary');
        const pageId = document.getElementById('pageId');
        const lastModified = document.getElementById('lastModified');
        const errorMessage = document.getElementById('errorMessage');

        // List of educational categories to filter random articles
        const educationalCategories = [
            'Education',
            'Science',
            'History',
            'Mathematics',
            'Physics',
            'Chemistry',
            'Biology',
            'Geography',
            'Literature',
            'Philosophy',
            'Technology',
            'Medicine',
            'Engineering',
            'Art',
            'Music',
            'Architecture',
            'Astronomy',
            'Psychology',
            'Sociology',
            'Anthropology',
            'Economics',
            'Political Science',
            'Linguistics',
            'Archaeology',
            'Geology',
            'Meteorology',
            'Oceanography',
            'Botany',
            'Zoology',
            'Neuroscience',
            'Computer Science',
            'Environmental Science',
            'Astrophysics',
            'Biochemistry',
            'Genetics',
            'Paleontology',
            'Theology',
            'Mythology',
            'Classical Studies',
            'Cultural Studies',
            'Film Studies',
            'Theater',
            'Dance',
            'Photography',
            'Design',
            'Fashion',
            'Culinary Arts',
            'Sports Science',
            'Public Health',
            'Epidemiology',
            'Veterinary Medicine',
            'Dentistry',
            'Nursing',
            'Pharmacy',
            'Law',
            'Business',
            'Finance',
            'Marketing',
            'Journalism',
            'Communication',
            'Media Studies',
            'International Relations',
            'Military History',
            'World War',
            'Ancient History',
            'Medieval History',
            'Renaissance',
            'Industrial Revolution',
            'Space Exploration',
            'Invention',
            'Innovation',
            'Biography',
            'Autobiography',
            'Memoir'
        ];

        let attemptCount = 0;
        const maxAttempts = 1; // Only 1 retry for maximum speed

        async function fetchRandomArticle() {
            // Show loading state
            fetchBtn.disabled = true;
            btnText.textContent = 'Loading...';
            btnLoader.classList.remove('hidden');
            articleContainer.classList.add('hidden');
            errorMessage.classList.add('hidden');
            
            try {
                // Use Wikipedia's REST API to get a random article
                // The /page/random/summary endpoint returns a random article with summary
                const response = await fetch('https://en.wikipedia.org/api/rest_v1/page/random/summary');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                // Check if the article seems educational (more lenient filter)
                const shouldReject = checkIfEducational(data);
                
                // Only retry once if we should reject, otherwise show immediately
                if (shouldReject && attemptCount < maxAttempts) {
                    attemptCount++;
                    return fetchRandomArticle();
                }
                
                attemptCount = 0;
                
                // Fetch additional content for a longer summary
                try {
                    const extendedContent = await fetchExtendedContent(data.title, data.pageid);
                    if (extendedContent && extendedContent.length > data.extract.length) {
                        data.extract = extendedContent;
                    }
                } catch (extError) {
                    console.log('Could not fetch extended content, using summary:', extError);
                    // Continue with original extract if extended fetch fails
                }
                
                // Display the article
                displayArticle(data);
                
            } catch (error) {
                console.error('Error fetching article:', error);
                errorMessage.textContent = `Error loading article: ${error.message}. Please try again.`;
                errorMessage.classList.remove('hidden');
            } finally {
                // Reset button state
                fetchBtn.disabled = false;
                btnText.textContent = 'Get Random Article';
                btnLoader.classList.add('hidden');
            }
        }

        async function fetchExtendedContent(title, pageid) {
            // Use MediaWiki API to get a much longer extract (up to 60 sentences for more details)
            // This will give us significantly more content than the summary endpoint
            const mwApiUrl = `https://en.wikipedia.org/w/api.php?action=query&format=json&pageids=${pageid}&prop=extracts&exintro=false&explaintext=true&exsentences=60&origin=*`;
            
            try {
                const mwResponse = await fetch(mwApiUrl);
                if (!mwResponse.ok) {
                    throw new Error('MediaWiki API request failed');
                }
                
                const mwData = await mwResponse.json();
                if (mwData.query && mwData.query.pages && mwData.query.pages[pageid]) {
                    const extract = mwData.query.pages[pageid].extract;
                    if (extract && extract.trim().length > 0) {
                        return extract;
                    }
                }
            } catch (error) {
                console.log('Error fetching extended content:', error);
            }
            
            return null;
        }

        function checkIfEducational(data) {
            // More comprehensive check using the educational categories list
            const text = (data.title + ' ' + (data.extract || '')).toLowerCase();
            
            // Only reject if it's clearly not educational (disambiguation, very short, etc.)
            const rejectPatterns = [
                'disambiguation',
                'list of',
                'category:',
                'template:',
                'file:',
                'user:',
                'wikipedia:',
                'help:'
            ];
            
            // Reject if title matches reject patterns
            const shouldReject = rejectPatterns.some(pattern => 
                data.title.toLowerCase().includes(pattern)
            );
            
            // Also reject if extract is too short (likely a stub)
            const isTooShort = !data.extract || data.extract.length < 100;
            
            // Accept almost everything - only reject obvious non-content pages
            return shouldReject || (isTooShort && attemptCount === 0);
        }

        function formatSummaryAsResearchArticle(paragraphs, container) {
            if (paragraphs.length === 0) return;
            
            // Introduction Section - State what the topic is and why it's interesting
            const introSection = document.createElement('div');
            introSection.className = 'summary-section';
            const introH3 = document.createElement('h3');
            introH3.textContent = 'Introduction';
            introSection.appendChild(introH3);
            
            const introP = document.createElement('p');
            introP.textContent = paragraphs[0].trim();
            introSection.appendChild(introP);
            container.appendChild(introSection);
            
            // If there's only one paragraph, we're done
            if (paragraphs.length === 1) return;
            
            // Remaining paragraphs organized into research article sections
            let remainingParagraphs = paragraphs.slice(1);
            
            // Determine how to distribute paragraphs across sections
            // Format: Introduction, Key Concepts and Methods, Important Information and Findings, Significance and Implications
            const totalRemaining = remainingParagraphs.length;
            
            if (totalRemaining >= 5) {
                // Five or more paragraphs: distribute across four sections including More Details
                const paragraphsPerSection = Math.floor(totalRemaining / 4);
                const remainder = totalRemaining % 4;
                
                // Key Concepts and Methods Section (first section)
                const methodStart = 0;
                const methodEnd = paragraphsPerSection + (remainder > 0 ? 1 : 0);
                const methodParagraphs = remainingParagraphs.slice(methodStart, methodEnd);
                
                if (methodParagraphs.length > 0) {
                    const methodSection = document.createElement('div');
                    methodSection.className = 'summary-section';
                    const methodH3 = document.createElement('h3');
                    methodH3.textContent = 'Key Concepts and Methods';
                    methodSection.appendChild(methodH3);
                    
                    methodParagraphs.forEach(para => {
                        const p = document.createElement('p');
                        p.textContent = para.trim();
                        methodSection.appendChild(p);
                    });
                    
                    container.appendChild(methodSection);
                }
                
                // Important Information and Findings Section (second section)
                const resultsStart = methodEnd;
                const resultsEnd = resultsStart + paragraphsPerSection + (remainder > 1 ? 1 : 0);
                const resultsParagraphs = remainingParagraphs.slice(resultsStart, resultsEnd);
                
                if (resultsParagraphs.length > 0) {
                    const resultsSection = document.createElement('div');
                    resultsSection.className = 'summary-section';
                    const resultsH3 = document.createElement('h3');
                    resultsH3.textContent = 'Important Information and Findings';
                    resultsSection.appendChild(resultsH3);
                    
                    resultsParagraphs.forEach(para => {
                        const p = document.createElement('p');
                        p.textContent = para.trim();
                        resultsSection.appendChild(p);
                    });
                    
                    container.appendChild(resultsSection);
                }
                
                // Significance and Implications Section (third section)
                const discussionStart = resultsEnd;
                const discussionEnd = discussionStart + paragraphsPerSection + (remainder > 2 ? 1 : 0);
                const discussionParagraphs = remainingParagraphs.slice(discussionStart, discussionEnd);
                
                if (discussionParagraphs.length > 0) {
                    const discussionSection = document.createElement('div');
                    discussionSection.className = 'summary-section';
                    const discussionH3 = document.createElement('h3');
                    discussionH3.textContent = 'Significance and Implications';
                    discussionSection.appendChild(discussionH3);
                    
                    discussionParagraphs.forEach(para => {
                        const p = document.createElement('p');
                        p.textContent = para.trim();
                        discussionSection.appendChild(p);
                    });
                    
                    container.appendChild(discussionSection);
                }
                
                // More Details Section (remaining paragraphs)
                const detailsParagraphs = remainingParagraphs.slice(discussionEnd);
                
                if (detailsParagraphs.length > 0) {
                    const detailsSection = document.createElement('div');
                    detailsSection.className = 'summary-section';
                    const detailsH3 = document.createElement('h3');
                    detailsH3.textContent = 'More Details';
                    detailsSection.appendChild(detailsH3);
                    
                    detailsParagraphs.forEach(para => {
                        const p = document.createElement('p');
                        p.textContent = para.trim();
                        detailsSection.appendChild(p);
                    });
                    
                    container.appendChild(detailsSection);
                }
            } else if (totalRemaining >= 4) {
                // Four paragraphs: distribute across three sections
                const paragraphsPerSection = Math.floor(totalRemaining / 3);
                const remainder = totalRemaining % 3;
                
                // Key Concepts and Methods Section
                const methodStart = 0;
                const methodEnd = paragraphsPerSection + (remainder > 0 ? 1 : 0);
                const methodParagraphs = remainingParagraphs.slice(methodStart, methodEnd);
                
                if (methodParagraphs.length > 0) {
                    const methodSection = document.createElement('div');
                    methodSection.className = 'summary-section';
                    const methodH3 = document.createElement('h3');
                    methodH3.textContent = 'Key Concepts and Methods';
                    methodSection.appendChild(methodH3);
                    
                    methodParagraphs.forEach(para => {
                        const p = document.createElement('p');
                        p.textContent = para.trim();
                        methodSection.appendChild(p);
                    });
                    
                    container.appendChild(methodSection);
                }
                
                // Important Information and Findings Section
                const resultsStart = methodEnd;
                const resultsEnd = resultsStart + paragraphsPerSection + (remainder > 1 ? 1 : 0);
                const resultsParagraphs = remainingParagraphs.slice(resultsStart, resultsEnd);
                
                if (resultsParagraphs.length > 0) {
                    const resultsSection = document.createElement('div');
                    resultsSection.className = 'summary-section';
                    const resultsH3 = document.createElement('h3');
                    resultsH3.textContent = 'Important Information and Findings';
                    resultsSection.appendChild(resultsH3);
                    
                    resultsParagraphs.forEach(para => {
                        const p = document.createElement('p');
                        p.textContent = para.trim();
                        resultsSection.appendChild(p);
                    });
                    
                    container.appendChild(resultsSection);
                }
                
                // Significance and Implications Section
                const discussionParagraphs = remainingParagraphs.slice(resultsEnd);
                
                if (discussionParagraphs.length > 0) {
                    const discussionSection = document.createElement('div');
                    discussionSection.className = 'summary-section';
                    const discussionH3 = document.createElement('h3');
                    discussionH3.textContent = 'Significance and Implications';
                    discussionSection.appendChild(discussionH3);
                    
                    discussionParagraphs.forEach(para => {
                        const p = document.createElement('p');
                        p.textContent = para.trim();
                        discussionSection.appendChild(p);
                    });
                    
                    container.appendChild(discussionSection);
                }
            } else if (totalRemaining === 3) {
                // Three paragraphs: one for each section
                const methodSection = document.createElement('div');
                methodSection.className = 'summary-section';
                const methodH3 = document.createElement('h3');
                methodH3.textContent = 'Key Concepts and Methods';
                methodSection.appendChild(methodH3);
                const methodP = document.createElement('p');
                methodP.textContent = remainingParagraphs[0].trim();
                methodSection.appendChild(methodP);
                container.appendChild(methodSection);
                
                const resultsSection = document.createElement('div');
                resultsSection.className = 'summary-section';
                const resultsH3 = document.createElement('h3');
                resultsH3.textContent = 'Important Information and Findings';
                resultsSection.appendChild(resultsH3);
                const resultsP = document.createElement('p');
                resultsP.textContent = remainingParagraphs[1].trim();
                resultsSection.appendChild(resultsP);
                container.appendChild(resultsSection);
                
                const discussionSection = document.createElement('div');
                discussionSection.className = 'summary-section';
                const discussionH3 = document.createElement('h3');
                discussionH3.textContent = 'Significance and Implications';
                discussionSection.appendChild(discussionH3);
                const discussionP = document.createElement('p');
                discussionP.textContent = remainingParagraphs[2].trim();
                discussionSection.appendChild(discussionP);
                container.appendChild(discussionSection);
            } else if (totalRemaining === 2) {
                // Two paragraphs: Key Concepts and Methods, Important Information and Findings
                const methodSection = document.createElement('div');
                methodSection.className = 'summary-section';
                const methodH3 = document.createElement('h3');
                methodH3.textContent = 'Key Concepts and Methods';
                methodSection.appendChild(methodH3);
                const methodP = document.createElement('p');
                methodP.textContent = remainingParagraphs[0].trim();
                methodSection.appendChild(methodP);
                container.appendChild(methodSection);
                
                const resultsSection = document.createElement('div');
                resultsSection.className = 'summary-section';
                const resultsH3 = document.createElement('h3');
                resultsH3.textContent = 'Important Information and Findings';
                resultsSection.appendChild(resultsH3);
                const resultsP = document.createElement('p');
                resultsP.textContent = remainingParagraphs[1].trim();
                resultsSection.appendChild(resultsP);
                container.appendChild(resultsSection);
            } else {
                // One remaining paragraph: Key Concepts and Methods
                const methodSection = document.createElement('div');
                methodSection.className = 'summary-section';
                const methodH3 = document.createElement('h3');
                methodH3.textContent = 'Key Concepts and Methods';
                methodSection.appendChild(methodH3);
                const methodP = document.createElement('p');
                methodP.textContent = remainingParagraphs[0].trim();
                methodSection.appendChild(methodP);
                container.appendChild(methodSection);
            }
        }

        function displayArticle(data) {
            // Set title
            articleTitle.textContent = data.title;
            
            // Set Wikipedia link
            if (data.content_urls && data.content_urls.desktop) {
                articleLink.href = data.content_urls.desktop.page;
            } else {
                articleLink.href = `https://en.wikipedia.org/wiki/${encodeURIComponent(data.title)}`;
            }
            
            // Set image if available
            if (data.thumbnail && data.thumbnail.source) {
                articleImage.src = data.thumbnail.source;
                articleImage.alt = data.title;
                articleImage.classList.remove('hidden');
            } else {
                articleImage.classList.add('hidden');
            }
            
            // Set summary with proper research article format
            if (data.extract) {
                // Split by double newlines to preserve paragraphs
                const paragraphs = data.extract.split('\n\n').filter(p => p.trim().length > 0);
                
                // Clear previous content
                articleSummary.innerHTML = '';
                
                // Format the summary following research article structure
                formatSummaryAsResearchArticle(paragraphs, articleSummary);
            } else {
                articleSummary.innerHTML = '<p>No summary available for this article.</p>';
            }
            
            // Set metadata
            if (data.pageid) {
                pageId.textContent = data.pageid;
            }
            
            if (data.timestamp) {
                const date = new Date(data.timestamp);
                lastModified.textContent = date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            }
            
            // Show article container
            articleContainer.classList.remove('hidden');
            
            // Scroll to article
            articleContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Event listener
        fetchBtn.addEventListener('click', fetchRandomArticle);

        // Fetch an article on page load
        window.addEventListener('load', () => {
            fetchRandomArticle();
        });
    </script>
</body>
</html>

